<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="time-formatter" attributes="time">
  <template>{{formattedTime}}</template>
  <script>
    function formatTime(time) {
      // Check correct time format and split into components
      time = time || '';
      time = time.toString().match (/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [time];

      if (time.length > 1) { // If time format correct
        time = time.slice (1);  // Remove full string match value
        time[5] = +time[0] < 12 ? 'am' : 'pm'; // Set AM/PM
        time[0] = +time[0] % 12 || 12; // Adjust hours
      }
      return time.join (''); // return adjusted time or original string
    }

    Polymer({
      formattedTime: formatTime(this.time),

      timeChanged: function () {
        this.formattedTime = formatTime(this.time);
      },
    });

  </script>
</polymer-element>
